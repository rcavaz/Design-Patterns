@startuml
hide empty attributes
hide empty members
skinparam backgroundcolor GhostWhite
skinparam class {
 ArrowColor Black
 BackgroundColor White
 BorderColor Black
}

interface Flyweight {
 +operation(extrinsicState)
}
class Client
class ConcreteFlyweight {
 +intrinsicState
 +operation(extrinsicState)
}
class UnsharedConcreteFlyweight {
 +allState
 +operation(extrinsicState)
}
class FlyweightFactory {
 +GetFlyweight(key)
}

Client -right-> FlyweightFactory
FlyweightFactory *--> Flyweight
Flyweight <|-- UnsharedConcreteFlyweight
Flyweight <|-right- ConcreteFlyweight
ConcreteFlyweight -[hidden]- UnsharedConcreteFlyweight
Client --> ConcreteFlyweight
Client --> UnsharedConcreteFlyweight

note right of FlyweightFactory
  <b>GetFlyweight(key)</b> {
    if (not exists flyweight[key]) {
      flyweight[key] = new Flyweight()
    }
    return flyweight[key]
  }
end note
@enduml
